(this["webpackJsonpreact-minesweeper"]=this["webpackJsonpreact-minesweeper"]||[]).push([[0],{155:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(0),c=n.n(a),i=n(17),u=n.n(i),o=(n(155),n(35)),s=n(107),f=n.n(s),l=n(147),b=n(276),j=n(44),m=n(45);function d(){var e=Object(j.a)(["\n  position: absolute;\n  left: 50%;\n  top: 25%;\n"]);return d=function(){return e},e}function x(){var e=Object(j.a)(["\n  float: left;\n"]);return x=function(){return e},e}var O=m.a.span(x()),p=m.a.img(d()),g=n.p+"static/media/sad.a13beb9c.png",v=n.p+"static/media/happy.fb4df1d1.png",h="50px",y="40px",C=function(e){var t=e.flagsCount,n=e.isWon,a=e.isGameOver,c=e.reset;return Object(r.jsxs)(b.a,{"data-test":"header-component",children:[Object(r.jsxs)(O,{children:["Flags remaining: ",t]}),Object(r.jsx)(p,{src:a&&!n?g:v,alt:"smile",onClick:c,width:h,height:y,"data-test":"smile-reset-icon"})]})},w=n(275),E=n(278),M=n(277);function S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function k(){var e=Object(j.a)(["\n  margin: 3rem 0;\n"]);return k=function(){return e},e}var F,N=m.a.div(k()),G=[10,20,30,40],P=[30,60,90],R=[{required:!0,message:"Required"}],A=function(e){var t=e.isConfigDefault,n=e.onSubmit,c=Object(a.useState)(!1),i=Object(o.a)(c,2),u=i[0],s=i[1],f=Object(a.useState)(0),l=Object(o.a)(f,2),b=l[0],j=l[1],m=Object(a.useState)(0),d=Object(o.a)(m,2),x=d[0],O=d[1],p=Object(a.useState)(0),g=Object(o.a)(p,2),v=g[0],h=g[1];function y(e){return Object(r.jsx)(r.Fragment,{children:e.map((function(e){return Object(r.jsx)(w.a.Option,{value:e,children:e},S())}))})}return Object(a.useEffect)((function(){t&&s(!0)}),[t]),Object(r.jsx)(E.a,{visible:u,onOk:function(){n({rowsCount:b,columnsCount:x,minesCount:v}),s(!1)},onCancel:function(){return s(!1)},okButtonProps:{disabled:!b||!x||!v},okText:"Start",maskClosable:!1,"data-test":"configs-modal-component",children:Object(r.jsx)(N,{children:Object(r.jsxs)(M.a,{onValuesChange:function(e){var t=e.rowsCount,n=e.columnsCount,r=e.minesCount;t&&j(t),n&&O(n),r&&h(r)},children:[Object(r.jsx)(M.a.Item,{label:"Please specify number of rows",name:"rowsCount",rules:R,children:Object(r.jsx)(w.a,{children:y(G)})}),Object(r.jsx)(M.a.Item,{label:"Please specify number of columns",name:"columnsCount",rules:R,children:Object(r.jsx)(w.a,{children:y(G)})}),Object(r.jsx)(M.a.Item,{label:"Please specify number of mines",name:"minesCount",rules:R,children:Object(r.jsx)(w.a,{children:y(P)})})]})})})},I=(n(271),n(98)),_=n.p+"static/media/mine_default.8e952ffc.png",D=n.p+"static/media/mine_unarmed.c703c937.png",B=n.p+"static/media/mine_red.5baffb83.png",L="0",T="1",q="2",z=(F={},Object(I.a)(F,L,_),Object(I.a)(F,T,D),Object(I.a)(F,q,B),F),J=function(e){var t=e.type,n=z[void 0===t?L:t];return Object(r.jsx)("img",{className:"mine-cell",src:n,alt:"oops",width:"40px",height:"40px"})},W=n.p+"static/media/flag.63f801a5.png",V=function(e){var t=e.dataCoord;return Object(r.jsx)("img",{src:W,alt:"flag","data-coord":t,width:h,height:y})};function Y(){var e=Object(j.a)(["\n  border: 1px solid;\n  width: 3rem;\n  height: 3rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: ",";\n"]);return Y=function(){return e},e}function H(){var e=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n"]);return H=function(){return e},e}function K(){var e=Object(j.a)(["\n  display: inline-block;\n  margin-top: 1rem;\n"]);return K=function(){return e},e}var Q,U=m.a.div(K()),X=m.a.div(H()),Z=m.a.div(Y(),(function(e){return e.showEmpty?"lightgrey":"#fff"}));function $(e,t){return Math.round(Math.random()*(t-e)+e)}!function(e){e.Empty="empty",e.Mine="mine",e.Number="number"}(Q||(Q={}));var ee=function(e){var t=e.config,n=e.isGameOver,c=e.setGameOver,i=e.flagsCount,u=e._setFlagsCount,s=e.setShowCongratz,f=t.rowsCount,l=t.columnsCount,b=t.minesCount,j=Object(a.useState)({}),m=Object(o.a)(j,2),d=m[0],x=m[1],O=Object(a.useRef)(),p=Object(a.useRef)(d),g=Object(a.useRef)(i),v=Object(a.useRef)();function h(e){p.current=e,x(e)}Object(a.useEffect)((function(){f&&l&&b&&w()}),[f,l,b]),Object(a.useEffect)((function(){!function(){var e=0;for(var n in d)d[n].flagged&&e++;r=t.minesCount-e,g.current=r,u(r);var r}()}),[d]),Object(a.useEffect)((function(){0===i&&Object.keys(d).length&&function(){var e=!0;for(var t in d){var n=d[t];if(!n.show||n.type===Q.Mine&&!n.flagged){e=!1;break}}e&&s(!0)}()}),[i]),Object(a.useEffect)((function(){n&&function(){var e=Object.assign({},d);for(var t in e)e[t].type===Q.Mine&&(e[t].show=!0);h(e)}(),!n&&v.current&&w()}),[n]),Object(a.useEffect)((function(){O.current=d,v.current=n})),Object(a.useEffect)((function(){document.addEventListener("contextmenu",y)}),[]);var y=function(e){e.preventDefault();var t=e.target.getAttribute("data-coord"),n=Object.assign({},p.current);if(t&&n[t]){var r=n[t];(r.flagged||g.current>0)&&(r.flagged=!r.flagged,r.show=!r.show),h(n)}};function C(e){return"".concat(e.x,"-").concat(e.y)}function w(){var e={};!function(e){for(var t=function(){for(var e={},t=function(){return{x:$(0,l-1),y:$(0,f-1)}},n=0;n<b;n++){for(var r=t(),a=C(r);e[a];)a=C(r=t());e[a]=r}return e}(),n=0;n<l;n++)for(var r=0;r<f;r++){var a={x:n,y:r,type:Q.Empty,flagged:!1},c=C(a);t[c]&&(a.type=Q.Mine),e[c]=a}}(e),function(e){for(var t in e){var n=e[t];if(n.type!==Q.Mine){for(var r=0,a=n.x-1;a<=n.x+1;a++)for(var c=n.y-1;c<=n.y+1;c++){var i=e[C({x:a,y:c})];i&&i.type===Q.Mine&&r++}r>0&&(n.neighbourMinesCount=r,n.type=Q.Number)}}}(e),h(e)}function E(e){if(e.type===Q.Mine)c(!0);else{var t=Object.assign({},d),n=C(e);t[n].show=!0,t[n].type===Q.Empty&&M(t[n],t),h(t)}}function M(e,t){for(var n=Math.abs(e.x+e.y),r=e.x-1;r<=e.x+1;r++)for(var a=e.y-1;a<=e.y+1;a++)if(r!==e.x||a!==e.y){var c=t[C({x:r,y:a})];if(c){var i=Math.abs(c.x+c.y),u=Math.abs(n-i);c&&c.type===Q.Number?c.show=!0:c&&c.type===Q.Empty&&!c.show&&u<2&&i!==n&&(c.show=!0,M(c,t))}}}function k(e){return e?e.show?e.flagged?function(e){return n&&e.type===Q.Mine?Object(r.jsx)(J,{type:T}):Object(r.jsx)(V,{dataCoord:C(e)})}(e):function(e){switch(e.type){case Q.Number:return e.neighbourMinesCount;case Q.Empty:return"";case Q.Mine:return Object(r.jsx)(J,{"data-test":"mine-cell-".concat(e.x,"-").concat(e.y),type:L});default:return null}}(e):"":null}var F=new Array(f).fill(0),N=new Array(l).fill(0);return Object(r.jsx)(U,{"data-test":"play-area-component",children:F.map((function(e,t){return Object(r.jsx)(X,{"data-test":"play-area-row",children:N.map((function(e,a){var c=C({x:a,y:t}),i=d[c];if(!i)return null;var u=C(i),o=i.type===Q.Mine&&!i.flagged&&i.show?"blown":"";return Object(r.jsx)(Z,{"data-test":"play-area-cell",className:o,onClick:function(){return function(e){return n?null:E(e)}(i)},"data-coord":u,showEmpty:i.show&&!i.flagged&&i.type===Q.Empty,children:k(i)},u)}))},S())}))})},te={rowsCount:0,columnsCount:0,minesCount:0};var ne=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(te),u=Object(o.a)(i,2),s=u[0],j=u[1],m=Object(a.useRef)(),d=Object(a.useState)(s.minesCount),x=Object(o.a)(d,2),O=x[0],p=x[1],g=Object(a.useState)(!1),v=Object(o.a)(g,2),h=v[0],y=v[1];Object(a.useEffect)((function(){m.current&&!f()(s,m.current)&&p(s.minesCount)}),[s]),Object(a.useEffect)((function(){h&&l.b.success("You won!!!")&&c(!0)}),[h]),Object(a.useEffect)((function(){m.current=s}));var w=f()(s,te);return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)(b.a,{className:"App-inner-container",children:[Object(r.jsx)(C,{flagsCount:O,isGameOver:n,isWon:h,reset:function(){c(!1),y(!1)}}),Object(r.jsx)(ee,{isGameOver:n,setGameOver:c,config:s,flagsCount:O,_setFlagsCount:p,setShowCongratz:y})]}),Object(r.jsx)(A,{isConfigDefault:w,onSubmit:j})]})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,279)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(ne,{})}),document.getElementById("root")),re()}},[[272,1,2]]]);
//# sourceMappingURL=main.21ced1b2.chunk.js.map